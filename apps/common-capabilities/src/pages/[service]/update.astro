---
import Layout from '../../layouts/Layout.astro';
import { services as apps } from '../../content/datastore.json';
import UpdateServicePage from './update';
import { getServicePathName } from '../../utils/common';

// TODO pull list of apps from backend OR optimize by using query params and fetching in the component
export async function getStaticPaths() {
  return apps.map((app) => ({
    params: {
      service: getServicePathName(app.ServiceName),
    },
    props: {
      app,
    },
  }));
}

const { app } = Astro.props;
---

<Layout title={`${app.ServiceName}-${app.Provider}-Update`}>
  <UpdateServicePage client:only="react" service={app} />
</Layout>
